<ChartContainer>
    <ApexChart TItem="SupportIncident"
               Title="Incident Severity"
               ChartType="@ChartType.Heatmap"
               Options="options"
               Debug>

        @foreach (var source in incidents.GroupBy(e => e.Source))
        {
            <ApexSeries TItem="SupportIncident"
                    Items="source.OrderBy(e=>e.WeekNumber)"
                    Name="@source.Key.ToString()"
                    XValue="@(e => e.WeekName)"
                    YAggregate="@(e => (int)e.Average(a=>a.Severity))" />
        }

    </ApexChart>
</ChartContainer>

@code {
    private List<SupportIncident> incidents { get; set; } = SampleData.GetSupportIncidents();
    private ApexChartOptions<SupportIncident> options;

    protected override void OnInitialized()
    {
        options = new ApexChartOptions<SupportIncident>
            {
                Colors = new List<string> { "#008FFB" }
            };
    }
    }